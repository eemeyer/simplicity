<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-us" xml:lang="en-us">
  <head>
    <title>Tutorial Search</title>
    <link href="../css/lib/yui-grids-min-3.2.0.css" rel="stylesheet" type="text/css" />
    <link href="../css/lib/jquery-ui-1.8.7.custom.css" rel="stylesheet" type="text/css" />
    <link href="../css/simplicity/simplicityPagination.css" rel="stylesheet" type="text/css" />
    <link rel="shortcut icon" href="../images/favicon.jpg"/>
    <style>
      body {
        margin: auto; /* center in viewport */
        width: 960px;
        font-size:62.5%;
      }
      #nav {
        width: 200px;
      }
      #main {
        width: 760px;
      }
      #themeSwitcher {
        float: right;
      }
      #themeSwitcherButton {
        float: right;
      }
      .result-set .result-row {
        margin-top: 6px;
        margin-bottom: 6px;
      }
      .ui-simplicity-facet-count {
        float: right;
      }
      #styleCheckboxes ul,
      #styleCheckboxesFlyout ul {
        list-style-type: none;
        padding-left: 1em;
      }
  </style>
  </head>
  <body>
    <div id="themeSwitcher" class="ui-helper-clearfix">
      <button id="themeSwitcherButton">Theme</button>
    </div>
    <h1><a href="index.html">home</a> | Tutorial Search</h1>
    <form id="myForm" onsubmit="return false;">
      <div class="yui3-g">
        <div id="nav" class="yui3-u">
          <fieldset>
            <legend>Search Controls</legend>
            <button id="searchButton">Search</button>
            <br />
            <button id="resetButton">Reset</button>
            <br />
            <label for="pageSize">Page Size</label>
            <select id="pageSize" name="pageSize">
              <option value=""></option>
              <option value="5">5</option>
              <option value="10">10</option>
              <option value="15">15</option>
              <option value="20">20</option>
              <option value="50">50</option>
            </select>
            <br />
            <input id="renderParams" type="checkbox" name="renderParameters" value="true" />
            <label for="renderParams">Render Parameters</label>
            <br />
            <input id="autoSearch" type="checkbox" name="autoSearch" value="true" checked="checked"/>
            <label for="autoSearch">Auto Search</label>
          </fieldset>
          <fieldset>
            <legend>Type</legend>
            <select name="type">
              <option value="">Select...</option>
              <option value="rentals">Rentals</option>
              <option value="sales">Sales</option>
            </select>
          </fieldset>
          <fieldset id="conditionCheckboxes">
            <legend>Condition</legend>
            <div class="row">
              <input type="checkbox" id="condition_0" name="condition" value="0" />
              <label for="condition_0">Money pit</label>
            </div>
            <div class="row">
              <input type="checkbox" id="condition_1" name="condition" value="1" />
              <label for="condition_1">Fixer-upper</label>
            </div>
            <div class="row">
              <input type="checkbox" id="condition_2" name="condition" value="2" />
              <label for="condition_2">Needs work</label>
            </div>
            <div class="row">
              <input type="checkbox" id="condition_3" name="condition" value="3" />
              <label for="condition_3">Good shape</label>
            </div>
            <div class="row">
              <input type="checkbox" id="condition_4" name="condition" value="4" />
              <label for="condition_4">Excellent condition</label>
            </div>
          </fieldset>
          <fieldset>
            <legend>Bedrooms</legend>
            <input type="hidden" id="bed" name="bed"/>
            <div id="bedLabel"></div>
            <div id="bedSlider"></div>
          </fieldset>
          <fieldset>
            <legend>Bathrooms</legend>
            <input type="hidden" id="bath" name="bath"/>
            <div id="bathLabel"></div>
            <div id="bathSlider"></div>
          </fieldset>
          <fieldset>
            <legend>Price (sales)</legend>
            <label for="priceMin">Min</label>
            <input id="priceMin" name="priceMin"/>
            <br/>
            <label for="priceMax">Max</label>
            <input id="priceMax" name="priceMax"/>
            <br/>
            <div id="priceRange"></div>
            <div id="priceSlider"></div>
          </fieldset>
          <fieldset>
            <legend>Lease (rentals)</legend>
            <label for="leaseMin">Min</label>
            <input id="leaseMin" name="leaseMin"/>
            <br/>
            <label for="leaseMax">Max</label>
            <input id="leaseMax" name="leaseMax"/>
            <br/>
            <div id="leaseRange"></div>
            <div id="leaseSlider"></div>
          </fieldset>
          <fieldset id="styleCheckboxes">
            <legend>Style</legend>
            <ul>
              <li class="row">
                <input type="checkbox" id="style_multi-family" name="style" value="multi-family" />
                <label for="style_multi-family">Multi Family</label>
                <ul>
                  <li class="row">
                    <input type="checkbox" id="style_apartment" name="style" value="apartment" />
                    <label for="style_apartment">Apartment</label>
                  </li>
                  <li class="row">
                    <input type="checkbox" id="style_condo" name="style" value="condo" />
                    <label for="style_condo">Condo</label>
                  </li>
                  <li class="row">
                    <input type="checkbox" id="style_co-op" name="style" value="co-op" />
                    <label for="style_co-op">Co-op</label>
                  </li>
                  <li class="row">
                    <input type="checkbox" id="style_townhome" name="style" value="townhome" />
                    <label for="style_townhome">Townhome</label>
                  </li>
                </ul>
              </li>
              <li class="row">
                <input type="checkbox" id="style_single-family" name="style" value="single-family" />
                <label for="style_single-family">Single Family</label>
                <ul>
                  <li class="row">
                    <input type="checkbox" id="style_colonial" name="style" value="colonial" />
                    <label for="style_colonial">Colonial</label>
                  </li>
                  <li class="row">
                    <input type="checkbox" id="style_classical" name="style" value="classical" />
                    <label for="style_classical">Classical</label>
                  </li>
                  <li class="row">
                    <input type="checkbox" id="style_victorian" name="style" value="victorian" />
                    <label for="style_victorian">Victorian</label>
                  </li>
                  <li class="row">
                    <input type="checkbox" id="style_contemporary" name="style" value="contemporary" />
                    <label for="style_contemporary">Contemporary</label>
                  </li>
                </ul>
              </li>
              <li class="row">
                <a id="styleCheckboxesMore" href="#" onclick="return false;">More</a>
              </li>
            </ul>
          </fieldset>
          <div id="styleCheckboxesFlyout" class="ui-widget ui-helper-hidden-accessible">
            <div class="ui-widget-content">
              <div>
                Style Flyout
                <a href='#' onclick='return false;' class='flyout-close'>close</a>
              </div>
              <ul>
                <li class="row">
                  <input type="checkbox" id="style_flyout_multi-family" name="style" value="multi-family" />
                  <label for="style_flyout_multi-family">Multi Family</label>
                  <ul>
                    <li class="row">
                      <input type="checkbox" id="style_flyout_apartment" name="style" value="apartment" />
                      <label for="style_flyout_apartment">Apartment</label>
                    </li>
                    <li class="row">
                      <input type="checkbox" id="style_flyout_condo" name="style" value="condo" />
                      <label for="style_flyout_condo">Condo</label>
                    </li>
                    <li class="row">
                      <input type="checkbox" id="style_flyout_co-op" name="style" value="co-op" />
                      <label for="style_flyout_co-op">Co-op</label>
                    </li>
                    <li class="row">
                      <input type="checkbox" id="style_flyout_townhome" name="style" value="townhome" />
                      <label for="style_flyout_townhome">Townhome</label>
                    </li>
                  </ul>
                </li>
                <li class="row">
                  <input type="checkbox" id="style_flyout_single-family" name="style" value="single-family" />
                  <label for="style_flyout_single-family">Single Family</label>
                  <ul>
                    <li class="row">
                      <input type="checkbox" id="style_flyout_colonial" name="style" value="colonial" />
                      <label for="style_flyout_colonial">Colonial</label>
                    </li>
                    <li class="row">
                      <input type="checkbox" id="style_flyout_classical" name="style" value="classical" />
                      <label for="style_flyout_classical">Classical</label>
                    </li>
                    <li class="row">
                      <input type="checkbox" id="style_flyout_victorian" name="style" value="victorian" />
                      <label for="style_flyout_victorian">Victorian</label>
                    </li>
                    <li class="row">
                      <input type="checkbox" id="style_flyout_contemporary" name="style" value="contemporary" />
                      <label for="style_flyout_contemporary">Contemporary</label>
                    </li>
                  </ul>
                </li>
              </ul>
            </div>
          </div>
        </div>
        <div id="main" class="yui3-u">
          <fieldset class="ui-widget ui-widget-content">
            <legend>Pagination</legend>
            <div id="paginationWidget"></div>
          </fieldset>
          <div class="yui3-g">
            <div class="yui3-u-1-2">
              <fieldset class="ui-widget">
                <legend>Search Results</legend>
                <div id="searchResults"></div>
              </fieldset>
            </div>
            <div class="yui3-u-1-2">
              <fieldset class="ui-widget">
                <legend>Search Results 2</legend>
                <div id="searchResults2"></div>
              </fieldset>
            </div>
          </div>
          <div class="yui3-g">
            <div id="debug"></div>
          </div>
        </div>
      </div>
    </form>
    <script type="text/javascript" src="../js/lib/jquery-1.5.1.min.js" charset="utf-8"></script>
    <script type="text/javascript" src="../js/lib/jquery-ui-1.8.7.custom.min.js" charset="utf-8"></script>
    <script type="text/javascript" src="../js/lib/jquery.pagination-2.1.js" charset="utf-8"></script>
    <script type="text/javascript" src="../js/lib/jquery.bgiframe-2.1.2.min.js" charset="utf-8"></script>
    <script type="text/javascript" src="../js/lib/jquery.ba-bbq-1.2.1.min.js" charset="utf-8"></script>
    <script type="text/javascript" src="../js/lib/jquery.numberformatter-1.1.0.js" charset="utf-8"></script>
    <script type="text/javascript" src="../js/lib/json2.js" charset="utf-8"></script>

    <script type="text/javascript" src="../js/simplicity/simplicityEquiv.js" charset="utf-8"></script>
    <script type="text/javascript" src="../js/simplicity/simplicityLoadJs.js" charset="utf-8"></script>
    <script type="text/javascript" src="../js/simplicity/simplicityState.js" charset="utf-8"></script>
    <script type="text/javascript" src="../js/simplicity/simplicityFromState.js" charset="utf-8"></script>
    <script type="text/javascript" src="../js/simplicity/simplicityToState.js" charset="utf-8"></script>
    <script type="text/javascript" src="../js/simplicity/simplicityHistory.js" charset="utf-8"></script>
    <script type="text/javascript" src="../js/simplicity/simplicityDiscoverySearch.js" charset="utf-8"></script>
    <script type="text/javascript" src="../js/simplicity/simplicityInputs.js" charset="utf-8"></script>
    <script type="text/javascript" src="../js/simplicity/simplicityDebug.js" charset="utf-8"></script>
    <script type="text/javascript" src="../js/simplicity/simplicitySlider.js" charset="utf-8"></script>
    <script type="text/javascript" src="../js/simplicity/simplicityFacetCount.js" charset="utf-8"></script>
    <script type="text/javascript" src="../js/simplicity/simplicityFacetedInput.js" charset="utf-8"></script>
    <script type="text/javascript" src="../js/simplicity/simplicityPagination.js" charset="utf-8"></script>
    <script type="text/javascript" src="../js/simplicity/simplicityPageSnapBack.js" charset="utf-8"></script>
    <script type="text/javascript" src="../js/simplicity/simplicitySearchResults.js" charset="utf-8"></script>
    <script type="text/javascript" src="../js/simplicity/simplicityRenderParamsSearchResults.js" charset="utf-8"></script>
    <script type="text/javascript" src="../js/simplicity/simplicityFlyout.js" charset="utf-8"></script>
    <script type="text/javascript"><!--//<![CDATA[
      $('#nav fieldset').addClass("ui-widget ui-widget-content");

      $('#themeSwitcherButton').button().click(function (evt) {
        $('#themeSwitcherButton').remove()
        $.simplicityLoadJs('http://jqueryui.com/themeroller/themeswitchertool/', function () {
          $('#themeSwitcher').themeswitcher({
            width: 200,
            height: 600,
            closeOnSelect: false
          });
        });
      });

      $('body').simplicityState();

      $('#nav :input[name="pageSize"]').simplicityInputs();
      $('#nav :input[name="renderParameters"]').simplicityInputs({
        supportsReset: false
      });

      $('#nav :input[name="type"]').simplicityFacetedInput({
        dimension: 'type',
        placement: 'append-label',
        numberFormatter: function (count) {
          return $('<option/>').text(count).format({
            format: '#,###',
            locale: 'us'
          }).text();
        }
      });

      $('#conditionCheckboxes :checkbox').simplicityFacetedInput({
        dimension: 'condition',
        placement: 'append-label'
      });

      $('#nav :input[name="bed"]').simplicityInputs();
      (function () {
        var display = function (evt, ui) {
          var label;
          if (ui.value === 0) {
            label = 'Any';
          } else {
            label = ui.value + ' BR'
          }
          $('#bedLabel').text(label);
        };
        $('#bedSlider').simplicitySlider({
          input: '#bed',
          any: 0,
          min: 0,
          max: 5,
          change: display,
          slide: display
        });
      }());

      $('#nav :input[name="bath"]').simplicityInputs();
      (function () {
        var display = function (evt, ui) {
          var label;
          if (ui.value === 0) {
            label = 'Any';
          } else {
            label = ui.value + ' BA'
          }
          $('#bathLabel').text(label);
        };
        $('#bathSlider').simplicitySlider({
          input: '#bath',
          any: 0,
          min: 0,
          max: 3,
          change: display,
          slide: display
        });
      }());

      $('#nav :input[name="priceMin"]').simplicityInputs();
      $('#nav :input[name="priceMax"]').simplicityInputs();
      (function () {
        var rangeDisplay = function (evt, ui) {
          var label;
          if (ui.values[0] === 199 && ui.values[1] === 701) {
            label = 'Any';
          } else if (ui.values[0] === 199) {
            label = 'Less than $' + ui.values[1] + 'K';
          } else if (ui.values[1] === 701) {
            label = 'More than $' + ui.values[0] + 'K';
          } else {
            label = 'Between $' + ui.values[0] + "K and $" + ui.values[1] + 'K';
          }
          $('#priceRange').text(label);
        };
        $('#priceSlider').simplicitySlider({
          input: ['#priceMin', '#priceMax'],
          any: [199, 701],
          min: 199,
          max: 701,
          range: true,
          change: rangeDisplay,
          slide: rangeDisplay,
          handleToInput: function (v) {
            return v * 1000;
          },
          inputToHandle: function (v) {
            return v / 1000;
          }
        });
      }());

      $('#nav :input[name="leaseMin"]').simplicityInputs();
      $('#nav :input[name="leaseMax"]').simplicityInputs();
      (function () {
        var rangeDisplay = function (evt, ui) {
          var label;
          if (ui.values[0] === 950 && ui.values[1] === 3050) {
            label = 'Any';
          } else if (ui.values[0] === 950) {
            label = 'Less than $' + ui.values[1];
          } else if (ui.values[1] === 3050) {
            label = 'More than $' + ui.values[0];
          } else {
            label = 'Between $' + ui.values[0] + " and $" + ui.values[1];
          }
          $('#leaseRange').text(label);
        };
        $('#leaseSlider').simplicitySlider({
          input: ['#leaseMin', '#leaseMax'],
          any: [950, 3050],
          min: 950,
          max: 3050,
          step: 50,
          range: true,
          change: rangeDisplay,
          slide: rangeDisplay
        });
      }());

      $('#styleCheckboxes :checkbox').simplicityFacetedInput({
        dimension: 'style',
        placement: 'append-label'
      });

      $('#styleCheckboxesFlyout :checkbox').simplicityFacetedInput({
        dimension: 'style',
        placement: 'append-label'
      });

      $('#styleCheckboxesFlyout').simplicityFlyout({
        positionSelector: '#styleCheckboxes',
        width: '200px'
      });
      $('#styleCheckboxesMore').click(function (evt, ui) {
        $('#styleCheckboxesFlyout').simplicityFlyout('toggle');
        return false;
      });

      $('#paginationWidget').simplicityPagination();

      $('#searchButton').button().click(function (evt) {
        $('body').simplicityDiscoverySearch('search');
        evt.stopPropagation();
      });
      $('#resetButton').button().click(function (evt) {
        $('body').simplicityState('reset');
        evt.stopPropagation();
      });

      $('#debug').simplicityDebug();

      // Rendered search results
      $('#searchResults').simplicitySearchResults();
      $('#searchResults2').simplicityRenderParamsSearchResults({
        url: 'search_results.php'
      });

      $('#autoSearch').change(function (evt) {
        $('body').simplicityDiscoverySearch('option', 'searchOnStateChange', evt.target.checked);
      });

      $('body')
        .simplicityState('mergeQueryParams')
        .simplicityHistory()
        .simplicityState('triggerChangeEvent')
        .simplicityPageSnapBack()
        .simplicityDiscoverySearch({
          url: 'search_controller.php',
          searchOnStateChange: $('#autoSearch')[0].checked
        })
        .simplicityDiscoverySearch('search');
    //]]>--></script>
  </body>
</html>
